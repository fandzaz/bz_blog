!function(t,a){var e=1e3,i=!1,n=t([]),o=function(e,i){var o=e.data("livestampdata");"number"==typeof i&&(i*=1e3),e.removeAttr("data-livestamp").removeData("livestamp"),i=a(i),a.isMoment(i)&&!isNaN(+i)&&(o=t.extend({},{original:e.contents()},o),o.moment=a(i),e.data("livestampdata",o).empty(),n.push(e[0]))},m=function(){i||(r.update(),setTimeout(m,e))},r={update:function(){t("[data-livestamp]").each(function(){var a=t(this);o(a,a.data("livestamp"))});var e=[];n.each(function(){var i=t(this),n=i.data("livestampdata");if(void 0===n)e.push(this);else if(a.isMoment(n.moment)){var o=i.html(),n=n.moment.fromNow();if(o!=n){var m=t.Event("change.livestamp");i.trigger(m,[o,n]),m.isDefaultPrevented()||i.html(n)}}}),n=n.not(e)},pause:function(){i=!0},resume:function(){i=!1,m()},interval:function(t){return void 0===t?e:void(e=t)}},s={add:function(e,i){return"number"==typeof i&&(i*=1e3),i=a(i),a.isMoment(i)&&!isNaN(+i)&&(e.each(function(){o(t(this),i)}),r.update()),e},destroy:function(a){return n=n.not(a),a.each(function(){var e=t(this),i=e.data("livestampdata");return void 0===i?a:void e.html(i.original?i.original:"").removeData("livestampdata")}),a},isLivestamp:function(t){return void 0!==t.data("livestampdata")}};t.livestamp=r,t(function(){r.resume()}),t.fn.livestamp=function(t,a){return s[t]||(a=t,t="add"),s[t](this,a)}}(jQuery,moment);